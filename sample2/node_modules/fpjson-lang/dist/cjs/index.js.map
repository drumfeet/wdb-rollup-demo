{
  "version": 3,
  "sources": ["../../src/index.mjs"],
  "sourcesContent": ["import * as R from \"ramda\"\n\nconst types = {\n  Object,\n  Array,\n  String,\n  Number,\n  Boolean,\n}\n\nconst isFunction = f => typeof f === \"function\"\n\nconst fn = (r, d = {}) => {\n  if (R.isNil(r)) return r\n\n  const _$ = R.curry(path => {\n    if (R.is(Array, path)) {\n      let arr = []\n      for (const v of path) arr.push(_$(v))\n      return arr\n    } else if (R.is(Object, path)) {\n      let obj = {}\n      for (const k in path) obj[k] = _$(path[k])\n      return obj\n    } else if (R.is(String, path)) {\n      if (path[0] === \"%\") {\n        return R.tail(path)\n      } else {\n        if (/^\\$/.test(path)) path = _var(R.tail(path), true)\n        return R.path(path.split(\".\"))(d)\n      }\n    } else {\n      return path\n    }\n  })\n\n  const _var = R.curry((path, ignore) => _$(path))\n\n  const _let = R.curry((path, val) => {\n    let tar = d\n    if (/^\\$/.test(path)) path = _var(R.tail(path), true)\n    let _path = path.split(\".\")\n    for (let v of R.init(_path)) {\n      if (R.isNil(tar[v])) tar[v] = {}\n      tar = tar[v]\n    }\n    tar[R.last(_path)] = val\n    return val\n  })\n\n  let ret = null\n  if (isFunction(r[0])) {\n    const args = R.tail(r)\n    ret = r[0](...args)\n  } else if (R.is(Array)(r) && r.length === 1 && r[0] === \"__\") {\n    ret = R.__\n  } else if (r[0] === \"typ\") {\n    ret = types[r[1]]\n  } else if (r[0] === \"reg\") {\n    ret = new RegExp(...R.tail(r))\n  } else if (\n    R.is(Array)(r) &&\n    (R.includes(r[0])([\"let\", \"var\", \"$\"]) || isFunction(R[r[0]]))\n  ) {\n    ret = R.compose(\n      R.ifElse(\n        R.o(R.gt(R.__, 0), R.length),\n        R.apply(\n          r[0] === \"$\"\n            ? _$\n            : r[0] === \"var\"\n            ? _var\n            : r[0] === \"let\"\n            ? _let\n            : R[r[0]]\n        ),\n        R.always(R[r[0]])\n      ),\n      R.map(v => fn(v, d)),\n      R.tail\n    )(r)\n    ret = typeof ret === \"undefined\" ? [] : ret\n  } else if (R.is(Object)(r) && R.is(String)(r.var)) {\n    ret = R.path(r.var.split(\".\"))(d)\n  } else if (R.is(Array)(r) || R.is(Object)(r)) {\n    ret = R.map(v => fn(v, d))(r)\n  } else {\n    ret = r\n  }\n\n  let _ret = null\n  if (R.is(Array)(ret) && R.is(String)(ret[0]) && ret[0] === \"[]\") {\n    _ret = R.tail(ret)\n  } else {\n    _ret = isFunction(ret?.[0]) ? fn(ret, d) : ret\n  }\n\n  return _ret\n}\n\nexport default fn\n"],
  "mappings": "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",
  "names": ["src_exports", "__export", "src_default", "__toCommonJS", "R", "types", "isFunction", "f", "fn", "r", "d", "_$", "path", "arr", "v", "obj", "k", "_var", "ignore", "_let", "val", "tar", "_path", "ret", "args", "_ret"]
}
